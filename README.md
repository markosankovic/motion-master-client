# Motion Master Client

Library and CLI tool for interacting with [Motion Master](https://github.com/synapticon/motion-master).

## Install

    sudo npm --unsafe-perm=true install -g @synapticon/motion-master-client

## Command line usage

    Usage: cli [options] [command]

    Options:
      -V, --version                          output the version number
      -h, --help                             output usage information

    Commands:
      request [options] <type> [args...]
      upload [options] [params...]
      download [options] [paramValues...]
      monitor [options] <topic> [params...]
 
### request

    Usage: request [options] <type> [args...]

    Options:
      -d, --device-address <value>   device address (uint32) generated by Motion Master - takes precedence over device position
      -p, --device-position <value>  used when device address is not specified (default: 0)
      -h, --help                     output usage information

### upload

    Usage: upload [options] [params...]

    Options:
      -d, --device-address <value>   device address (uint32) generated by Motion Master - takes precedence over device position
      -p, --device-position <value>  used when device address is not specified (default: 0)
      -h, --help                     output usage information

### download

    Usage: download [options] [paramValues...]

    Options:
      -d, --device-address <value>   device address (uint32) generated by Motion Master - takes precedence over device position
      -p, --device-position <value>  used when device address is not specified (default: 0)
      -h, --help                     output usage information

### monitor

    Usage: monitor [options] <topic> [params...]

    Options:
      -d, --device-address <value>   device address (uint32) generated by Motion Master - takes precedence over device position
      -p, --device-position <value>  used when device address is not specified (default: 0)
      -i, --interval <value>         sending interval in microseconds (default: 1000000)
      -h, --help                     output usage information

## Library usage

    const input = new rxjs.Subject<Buffer>();
    const output = new rxjs.Subject<Buffer>();
    const motionMasterClient = new MotionMasterClient(input, output);
    const messageId = v4(); // '4e4d938e-1021-4b68-ad01-38c7ed2c5ee4'
    const getSystemVersion: motionmaster.MotionMasterMessage.Request.IGetSystemVersion = {};
    motionMasterClient.sendRequest({ getSystemVersion }, messageId);
    motionMasterClient.systemVersion$.subscribe(console.log);

## Publish

    npm publish --access=public
